## 广告弹窗触达频率的控制

> 产品提出想在我们的产品的首页做个弹窗广告，但是又不希望用户每次进来都给用户弹窗，每个用户每天进来只弹一次就好了。

#### 暴力key 小项目

以redis举例， 如果用户今天访问过一次，就在Redis里面设置一个以用户为维度的key。
redis :  
redis-u1-key  
redis-u2-key  
redis-u3-key  

#### bitmap

- 你突然想到用户的唯一标识符(uid),是一个从0到1个亿递增的整数。一天一次弹窗对应一个0/1二进制值。

那能否分配一个大的数组，数组的值是boolean值，这个时候你突然想到了Redis的Bitmap数据结构  

一个用户uid为1bit位，1亿用户 = 100000000b/8/1024/1024=11MB

#### 布隆过滤器（Bloom Filter）

- 如果现在不止有一个弹层呢，比如1000个？亦或者用户的唯一标识符并不是一个自增的整数。这个时候如何处理呢？

> 如果我们愿意牺牲少了的准确度，达到比较大的存储量的话，你可能会考虑到布隆过滤器（Bloom Filter）。

